<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<HTML>
<HEAD>
 <TITLE>LICQ Frequently Asked Questions</TITLE>
</HEAD>

<BODY BGCOLOR="#285078" LINK="#FFD700" TEXT="white" VLINK="#AF8700">
<IMG SRC="Gifs/Header-Help.gif" ALT="Main" HEIGHT="80">
<BR><BR>

<H1>
<STRONG>LICQ FAQ</STRONG><BR>
</H1>
<H2>November 19, 2002</H2>
<P>
Written by <A HREF="mailto:graham@licq.org">Graham Roff</A><BR>
Updated by <A HREF="mailto:dstenn@licq.org">Dennis Tenn</A><BR>
Last Updated by <A HREF="mailto:jon@licq.org">Jon Keating</A><BR>
<HR>

<P>
<P>

<H3>Section 1: Basics</H3>
<BLOCKQUOTE>
<A HREF="#1_1">1.1: Who wrote LICQ?</A><BR>
<A HREF="#1_2">1.2: What does LICQ stand for anyway?</A><BR>
<A HREF="#1_3">1.3: Is LICQ based on micq code like many of the other clones?</A><BR>
<A HREF="#1_4">1.4: Will LICQ support the ICQ 2000b protocol?</A><BR>
</BLOCKQUOTE>
<P>
<H3>Section 2: Compiling / Installing</H3>
<BLOCKQUOTE>
<A HREF="#2_1">2.1: What is needed to compile LICQ?</A><BR>
<A HREF="#2_2">2.2: How do I get LICQ working through a SOCKS5 server?</A><BR>
<A HREF="#2_3">2.3: How do I do a manual install (ie I have a binary distribution)?</A><BR>
<A HREF="#2_4">2.4: I am trying to compile with Solaris and the compilation freezes at the "moc" line.</A><BR>
<A HREF="#2_5">2.5: I am compiling under Solaris and I get an internal error.</A><BR>
<A HREF="#2_6">2.6: I am using an older compiler (ie gcc 2.7) and get errors about ANSI C++ not allowing implicit casting of "void *".</A><BR>
<A HREF="#2_7">2.7: What is socklen_t?</A><BR>
</BLOCKQUOTE>
<P>
<H3>Section 3: Using</H3>
<BLOCKQUOTE>
<A HREF="#3_1">3.1: Where do I get a uin from?</A><BR>
<A HREF="#3_2">3.2: I have a lot of users and now my contact list never gets updated...</A><BR>
<A HREF="#3_3">3.3: Does multi-party chat work?</A><BR>
<A HREF="#3_4">3.4: What is, and how do I use, the licq fifo?</A><BR>
<A HREF="#3_5">3.5: What happened to the "beep" OnEvent option, or, how do I make the pc-speaker beep when receiving a message?</A><BR>
<A HREF="#3_6">3.6: LICQ appears 5 times in my process list, what's going on?</A><BR>
<A HREF="#3_7">3.7: I get "[ERR] Unable to allocate TCP port for local server (Unknown host)" when I start LICQ.</A><BR>
<A HREF="#3_8">3.8: What happened to the spoof uin option?</A><BR>
<A HREF="#3_9">3.9: I am using ip_masq_icq module and it doesn't forward connections to LICQ.</A><BR>
<A HREF="#3_10">3.10: How do I configure ipmasq for ICQ?</A><BR>
<A HREF="#3_11">3.11: I can't connect to ICQ, all I get are timeouts!</A><BR>
<A HREF="#3_12">3.12: I can't connect to someone using the ICQ200b client!</A><BR>
<A HREF="#3_13">3.13: Does Licq support server side contact lists?</A><BR>
</BLOCKQUOTE>
<P>
<H3>Section 4: Plugins</H3>
<BLOCKQUOTE>
<A HREF="#4_1">4.1: I get something about being unable to load a plugin because "file not found" or "no such file or directory".</A><BR>
<A HREF="#4_2">4.2: I get something about "undefined symbol: ..." when I try and load the Qt-GUI plugin.</A><BR>
<A HREF="#4_3">4.3: LICQ starts up but then exits with "licq: Fatal IO error: client killed".</A><BR>
<A HREF="#4_4">4.4: What does "undefined symbol: LP_Main" mean?</A><BR>
<A HREF="#4_5">4.5: Qt-gui crashes on startup, it says something about "XRegisterIMInstantiateCallback"</A><BR>
<A HREF="#4_6">4.6: When Licq is docked it is still visible in the taskbar, what can i do?"</A><BR>
</BLOCKQUOTE>

<H3>Section 5: Qt-GUI Plugin</H3>
<BLOCKQUOTE>
<A HREF="#5_1">5.1: The GUI says it is unable to load &lt;file&gt;.xpm or &lt;file&gt;.gif, but the file is there!</A><BR>
<A HREF="#5_2">5.2: How do I change the colors of the Qt-Gui?</A><BR>
<A HREF="#5_3">5.3: Why are there no spaces between words in the History tab?</A><BR>
<A HREF="#5_4">5.4: How do I dock the LICQ icon?</A><BR>
</BLOCKQUOTE>

<H3>Section 6: Donations</H3>
<BLOCKQUOTE>
<A HREF="#6_1">6.1: What are the operating expenses?</A><BR>
<A HREF="#6_2">6.2: What is the emergency fund?</A><BR>
<A HREF="#6_3">6.3: How do I know my donation is going to the project?</A><BR>
<A HREF="#6_4">6.4: I donated money, will you add the feature I want?</A><BR>
</BLOCKQUOTE>

<HR>
<H3><STRONG>Section 1: Basics</STRONG></H3>


<A NAME="1_1"><STRONG>1.1: Who wrote LICQ?</STRONG>
<P>
LICQ was first begun as a text mode client to ICQ in February 1998 by
Graham Roff and a programmer who wishes for some strange
reason to remain anonymous.  He's from Nova Scotia, perhaps that explains
things.  The Qt port was written by Graham Roff and starting in June 1998.<BR>
Since then the entire code has been rewritten by Graham Roff, with the assistance
of numerous internet volunteers.  The current maintainer is Jon Keating. 
<P>
<BR>

<A NAME="1_2"><STRONG>1.2: What does LICQ stand for anyway?</STRONG>
<P>
Contrary to popular belief, it does not stand for Linux ICQ.  This
would be (a) a bit conceited, and (b) way too obvious a name for a linux
program.
<P>
<BR>

<A NAME="1_3"><STRONG>1.3: Is LICQ based on micq code like many of the other clones? </STRONG>
<P>
LICQ was begun a long time before micq was released and is based
completely on original source code.  It is also done in C++ as opposed to C
like micq and most of the other clones.
<P>
<BR>

<A NAME="1_4"><STRONG>1.4: Will LICQ support the ICQ 2000b protocol? </STRONG>
<P>
LICQ now supports some, if not most, of the 2000 (v8) protocol.
Thus SMS support has now been implemented.
<P>
<BR>


<HR>
<H3><STRONG>Section 2: Compiling and Installing</STRONG></H3>
   
<A NAME="2_1"><STRONG>2.1: What is needed to compile LICQ?</STRONG>
<P>
See the web page in the info section under Requirements for all the details.
<P>
<BR>

<A NAME="2_2"><STRONG>2.2: How do I get LICQ working with a SOCKS5 server?</STRONG>
<P>
I do not use socks, and didn't write the code to make LICQ work with
socks.  After configuring with --enable-socks5 you have to set some environment
variables as well, follow the guidelines that come with the socks5 client.
Other than that, I can't help you.  Try the README.SOCKS included with the
LICQ distribution.
<P>
<BR>

<A NAME="2_3"><STRONG>2.3: How do I do a manual install (ie I have a binary distribution)?</STRONG>
<P>
<EM>&amp;lt;= 0.61</EM><BR>
Easy, first copy the binary to somewhere nice (like /usr/local/bin).
Then copy licq-base.tar.gz to /usr/local/share.  There are some other
interesting documents to look at if you want as well.  Then run licq and it 
should finish the install for you.  See, it's easy.<BR>
<EM>&amp;gt;= 0.70</EM><BR>
Copy the binary somewhere nice like above.  Then copy everything from the 
share/ directory to /usr/local/share/licq.  To manually install a plugin simply
copy it to /usr/local/lib/licq/plugins.
<P>
<BR>

<A NAME="2_4"><STRONG>2.4: I am trying to compile and the compilation freezes at the "moc" line.</STRONG>
<P>
LICQ requires GNU make to compiler properly.  Alternatively,
you can compile all the moc files by hand doing:<BR>
$&gt; moc &lt;infile&gt; -o &lt;outfile&gt;<BR>
The list of files to moc is in the Makefile.  If you do this, you will
still have to replace the $^ in the following section:<BR>
++ licq: $(OBJECTS) $(METAOBJ)<BR>
++         $(CXX) $(CXXFLAGS) -o $@ $^ $(LDFLAGS) $(LDLIBS)<BR>
to be:<BR>
++ licq: $(OBJECTS) $(METAOBJ)<BR>
++         $(CXX) $(CXXFLAGS) -o $@ $(OBJECTS) $(METAOBJ) $(LDFLAGS) $(LDLIBS)<BR>
<P>
<BR>

<A NAME="2_5"><STRONG>2.5: I am compiling and I get an internal error.</STRONG>
<P>
This is a problem with some versions of g++.  Simply remove <EM>-O2</EM> 
from the relevant Makefile and it should work fine.
<P>
<BR>

<A NAME="2_6"><STRONG>2.6: I get errors about ANSI C++ not allowing implicit casting of "void *".</STRONG>
<P>
Some older implementations of libstdc++ erroneously define NULL as being
((void *)0), which causes some c++ compilers to complain.  If this is the case,
you can either upgrade to a newer compiler or simply run the "remove-null.sh" (included
with the licq-data package in <EM>contrib</EM>)
inside the <EM>src/</EM> directory, which will replace all NULL's with zeros.
<P>
<BR>

<A NAME="2_7"><STRONG>2.7: What is socklen_t?</STRONG>
<P>
If you get compile errors refering to socklen_t simply edit config.h and
add "#define socklen_t int" to it somewhere.
<P>
<BR>

<HR>
<H3><STRONG>Section 3: Using</STRONG></H3>


<A NAME="3_1"><STRONG>3.1: How do I get a uin?</STRONG>
<P>
LICQ can register a new user with Mirabilis.  Just select "Register" from
the user menu.  See http://www.mirabilis.com for more info.
<P>
<BR>

<A NAME="3_2"><STRONG>3.2: I have a lot of users and now my contact list never gets updated...</STRONG>
<P>
Reduce MaxUsersPerPacket to 100.  If this still happens, reduce this value until
things start working again.
<P>
<BR>

<A NAME="3_3"><STRONG>3.3: Does multi-party chat work?</STRONG>
<P>
Yes.
<P>
<BR>

<A NAME="3_4"><STRONG>3.4: What is, and how do I use, the licq fifo?</STRONG>
<P>
Please see the <A HREF="README.FIFO">README.FIFO</A>
<P>
<BR>

<A NAME="3_5"><STRONG>3.5: What happened to the "beep" OnEvent option, or, how do I make the pc-speaker beep when receiving a message?</STRONG>
<P>
The beep command did not work properly and so was incorporated into a
self-contained executable (build beep.c in the contrib directory using the
instructions contained therein) which can be called instead of "play" (or
whatever) in order to generate a beep.<BR>
So to rephrase, instead of a beep option, you can build a "beep" executable,
and enter "beep" as the OnEvent Command (the parameters are irrelevant for
this command).
<P>
<BR>

<A NAME="3_6"><STRONG>3.6: LICQ appears 5 times in my process list, what's going on?</STRONG>
<P>
There is really only 1 copy of LICQ running, using the resources of one of
the listed processes.  The reason you see multiple copies is that Linux
shows threads as separate processes.  As LICQ may be running 5 threads or more
at a time, multiple process entries will appear.
<P>
<BR>

<A NAME="3_7"><STRONG>3.7: I get "[ERR] Unable to allocate TCP port for local server (Unknown host)" when I start LICQ.</STRONG>
<P>
This will happen if you have not set up your hostname properly.  This is a
necessary step for running many network applications.  Make sure your hostname
(which can be found by typing "hostname") resolves to a valid ip.  Typically
this involves adding it to /etc/hosts and setting the ip to your static ip or
to 127.0.0.1 if you don't have one.
<P>
<BR> 

<A NAME="3_8"><STRONG>3.8: What happened to the spoof uin option?</STRONG>
<P>
This is no longer supported by the ICQ protocol. Sorry.
<P>
<BR>


<A NAME="3_9"><STRONG>3.9: I am using ip_masq_icq module and it doesn't forward connections to LICQ.</STRONG>
<P>
The ip_masq_icq module uses the ip contained in the logon packet to determine whether
or not to forward connections to your machine.  This IP is determined typically
by looking at the hostname of the local machine.  If your hostname is not set correctly
or cannot be resolved, then LICQ will default to using 127.0.0.1, which will be ignored
by the module.<BR>
The solution is to ensure that your hostname (to find it, type "hostname" at the prompt)
resolves to your correct sub-net IP.  To find out, ping your hostname ("ping &lt;hostname&gt;")
and see what the ip ends up being.<BR>
This ip will probably be something in the 192.168.xx.xx or 10.xx.xx.xx range.  If it
resolves to 127.0.0.1 or 0, then there is a problem.  To fix this, simply edit
<I>/etc/hosts</I> and enter the correct ip and hostname there, for example:
<P>
127.0.0.1    localhost<BR>
192.168.0.2  &lt;hostname&gt;<BR>
...<BR>
<P>
<BR>

<A NAME="3_10"><STRONG>3.10: How do I configure ipmasq for ICQ?</STRONG>
<P>
Configuring ipmasq and ipchains for ICQ is fairly simple.  The relevant
man pages contain a good source of information as well.  Here is a sample
configuration using ipmasq:<BR>
---(cut here)---<BR>
<BR>
# Enable port forwarding for ICQ Client<BR>
#<BR>
port=2000<BR>
while [ $port -lt 2020 ]<BR>
do<BR>
  /usr/sbin/ipmasqadm portfw -a -P tcp -L $xnet $port -R 192.168.1.2 $port<BR>
  port=$((port+1))<BR>
done<BR>
/usr/sbin/ipmasqadm portfw -a -P udp -L $xnet 4000 -R 192.168.1.2 4000<BR>
<BR>
---(cut here)---<BR>
<BR>
And here is an example using iptables which is used with the Linux Kernel 2.4.x:<BR>
---(cut here)---<BR>
<BR>
iptables -t nat -A PREROUTING -p tcp --destination-port 2000:2020 -i ppp0 -j DNAT --to 192.168.1.2<BR>
iptables -t nat -A PREROUTING -p udp --destination-port 4000 -i ppp0 -j DNAT --to 192.168.1.2<BR>

<BR>
---(cut here)---<BR>
<BR>
This script will forward tcp ports 2000-2020 and udp port 4000 to your
machine inside the firewall. Note $xnet is the ip address issued to you by
your ISP and 192.168.1.2 should be changed to the ip address of the
machine that you are running LICQ on.  Also note that this is just one
sample configuration and there are other ways to do this, using ipchains
for example.<BR>
<P>
<BR>


<A NAME="3_11"><STRONG>3.11: I can't connect to ICQ, all I get are timeouts!</STRONG>
<P>
This is a problem with the ICQ servers and people who use icq2000.  For
some reason a selection of the icq servers do not allow you to log on using
another client after using icq2000.<BR>
The solution?  Edit ~/.licq/licq.conf and set the servers to be a valid
icq.mirabilis.com ip except 205.188.153.*, eg 205.188.179.33.  Try
"nslookup icq.mirabilis.com" for more.<BR>
This, hopefully, will make it work.  In any case, it's not a LICQ problem, but
a mirabilis stupidity.<BR>
<P>
<BR>


<A NAME="3_12"><STRONG>3.12: I can't connect to someone using the ICQ2000b or newer client!</STRONG>
<P>
This will be fixed once Licq implements new peer-to-peer code.<BR>
ICQ 2000b by default is set to not allow connections with older clients, like Licq.
To work around this, the ICQ 2000 user must go into the ICQ Menu, then Security
and Preferences, and then the Ignore tab.<BR>
They must uncheck the "Do not allow Direct Connection with previous ICQ
software versions" box.  Also, on the Direct Connection tab, they must
make sure that the Allow Direct Connection selection is set appropriately for this
instance.  It can vary.
<P>
<BR>

<A NAME="3_13"><STRONG>3.13: Does Licq support server side contact lists?</STRONG>
<P>
Yes, however it is disabled by default in 1.2.0a.  The reason it is disabled by default is that it is not complete yet, so some functions won't work.  Some of these functions that don't work are changing groups that the user is in, renaming the user, using the name that is stored on the server, and adding users that require authorization.  Keep your eye out for newer versions that support this.
<P>
<BR>

<HR>
<H3><STRONG>Section 4: Plugins</STRONG></H3>

<A NAME="4_1"><STRONG>4.1: I get something about being unable to load a plugin because "file not found" or "no such file or directory".</STRONG>
<P>
If this happens with QT-GUI then you most likely configured --with-kde support. 
In this case, please type "licq -p kde-gui" to start licq and read the README.KDE file.<BR>
In all other cases the plugin may be unable to find a necessary library.
Use "ldd" on the offending plugin to see which library it can't find.  Then add
the directory containing that missing library to your /etc/ld.so.conf file or
LD_LIBRARY_PATH environment variable (see 4.2).
<P>
<BR>

<A NAME="4_2"><STRONG>4.2: I get something about "undefined symbol: ..." when I try and load the Qt-GUI plugin.</STRONG>
<P>
This problem occurs if you have a copy of qt 1.4 somewhere on your system
and LICQ is linked to it.  Verify this using <EM>ldd /usr/local/lib/licq/licq_qt-gui.so</EM>
and see which qt library it's linked to.  If it is qt 1.4 then this library will have
to be moved to somewhere after the location of the qt 2.0 library, as listed
in /etc/ld.so.conf.  Read the README-QT-1.4-AND-2.0 for more information.<BR>
One other solution is simply to add the directory with Qt 2.0 in it to your
LD_LIBRARY_PATH environment variable like so:<BR>
<EM>export LD_LIBRARY_PATH=/usr/local/qt/lib</EM><BR>
which can be added to /etc/profile as per the Qt installation instructions.
<P>
<BR>

<A NAME="4_3"><STRONG>4.3: LICQ starts up but then exits with "licq: Fatal IO error: client killed".</STRONG>
<P>
Because LICQ is multi-threaded, it requires thread-safe X11 libraries.  These
can be aquired by recompiling your X server with the thread option or by grabbing
the binaries (see the Info section of the LICQ web page under Requirements).
<P>
<BR>

<A NAME="4_4"><STRONG>4.4: What does "undefined symbol: LP_Main" mean?</STRONG>
<P>
This is a bug with the dynamic loader used in SMP machines.  Try changing DLOPEN_POLICY
in config.h to RTLD_NOW and rebuild.  Or upgrade your kernel/ld.
<P>
<BR>
<A NAME="4_5"><STRONG>4.5: Qt-gui crashes on startup, it says something about "XRegisterIMInstantiateCallback"</STRONG>
<P>
There is a bug in QT 3.x whith X Input Methods (XIM).<BR>
Try to start licq like this: "licq -- -noxim".
<P>
<BR>
<A NAME="4_6"><STRONG>4.6: When Licq is docked it is still visible in the taskbar, what can i do?</STRONG>
<P>
When you are using KDE you can prevent Licq from beeing visible in the taskbar.<BR>
Simply prepend "kstart --skiptaskbar" to your commandline:<BR>
<TT>kstart --skiptaskbar licq</TT>
<P>
<BR>

<HR>
<H3><STRONG>Section 5: Qt-GUI Plugin</STRONG></H3>

<A NAME="5_1"><STRONG>5.1: The QUI says it is unable to load &lt;file&gt;.xpm or &lt;file&gt;.gif, but the file is there!</STRONG>
<P>
Qt has problems loading certain formats of xpm.  The solution is simply
to save the pixmap in question as a gif and edit the skin file appropriately.	 If the
file in question is a gif, then make sure that you compiled qt with gif support
enabled (<EM>configure -gif</EM>).
<P>
<BR>

<A NAME="5_2"><STRONG>5.2: How do I change the colors of the Qt-Gui?</STRONG>
<P>
Colors are now integrated into the skin file.  To change colors you must
edit the skin file (found in <EM>/usr/local/share/licq/qt-gui/skin.&lt;name&gt;</EM>) and
add the following:<BR>
<BR>
# --- colors ---<BR>
colors.online = #ff0000 <BR>
colors.away = dark green<BR>
colors.offline = firebrick<BR>
colors.newuser = yellow<BR>
colors.background = default<BR> 
colors.gridlines = black<BR>
<BR>
Of course you get to select your own colors!
<P>
<BR>

<A NAME="5_3"><STRONG>5.3: Why are there no spaces between words in the History tab?</STRONG>
<P>
This seems to be a bug in the Qt widget being used.  The solution is simply to use a TrueType font.
Select one from the Options Dialog in the Font section.
<P>
<BR>

<A NAME="5_4"><STRONG>5.4: How do I dock the LICQ icon?</STRONG>
<P>
Docking the licq qt-gui status icon is fairly simple to do.  Here is a list
of window managers and what to do.  First, do the following:<BR>
<BR>
1. Start LICQ and enable the dock icon in the Options screen.<BR>
2. Select "Save Settings" from the system menu.<BR>
3. Restart LICQ (very important).<BR>
<BR>
<STRONG>WindowMaker</STRONG><BR>
4. Drag the status icon to the dock and voila.<BR>
Note that the other icon that appears is from windowmaker and can be set
to something nice, or disable entirely using the windowmaker menu.<BR>
<BR>
<STRONG>AfterStep</STRONG><BR>
4. Add the following to your ~/GNUstep/Library/AfterStep/wharf file:<BR>
   "*Wharf licq      - Swallow "LICQWharf" echo &amp;"<BR>
5. Next time start LICQ, the icon should appear in the wharf.<BR>
4*.Another possibility is to add:<BR>
*FvwmButtons(Swallow (UseOld,NoKill,NoClose) "LICQWharf" Nop, Action (Mouse 1) 'Exec
/usr/bin/licq')<BR>
to your FvwmButtons config file.<BR>
<BR>
<STRONG>KDE</STRONG><BR>
4. Configure the qt-gui plugin with --with-kde and then licq will dock in Kicker.<BR>
5. Start LICQ and there it goes!<BR>
<BR>
<STRONG>Gnome</STRONG><BR>
4. Pick a smaller dock icon then the default (either 64x48 or one of the themed icons).<BR>
5. Select "Swallow App" from the gnome panel menu.<BR>
6. Set "Title =  LICQWharf", "Width =  64", "Height = 48".<BR>
<BR>
<P>

<HR>

<H3><STRONG>Section 6: Donations</STRONG></H3>

<A NAME="6_1"><STRONG>6.1: What are the operating expenses?</STRONG><BR>
<P>
The mail server and DNS server are currently run by Dennis Tenn and he pays all costs privately.  A percentage of the donations will go to pay for the cost of running this server.  Also, the domain names must be paid for every few years.
</P>
<BR>

<A NAME="6_2"><STRONG>6.2: What is the emergency fund?</A></STRONG><BR>
<P>
It is a percentage of donations that are kept in case a main developer has a personal emergency that requires monetary assistance.  The usage for this money will be for necessary items such as food, rent, medicine, and other similiar items.  It will not be used for unnecessary items such as alcohol, hardware, or anything that is a personal interest.
</P>
<BR>

<A NAME="6_3"><STRONG>6.3: How do I know my donation is going to the project?</A></STRONG><BR>
<P>
Since you are using Licq, you trust us not to put a backdoor in the program.  With this reasoning, you should trust us that your valued contribution will be used solely to directly help Licq.
</P>
<BR>

<A NAME="6_4"><STRONG>6.4: I donated money, will you add the feature I want?</A></STRONG><BR>
<P>
Just because you donated money does not entitle you to automatically have a feature you want to be added.  It will be considered as all other feature requests are considered.  Your donations are appreciated, but they are viewed as contribuations you make to help continue the Licq project.
</P>
<BR>

</BODY>
</HTML>
