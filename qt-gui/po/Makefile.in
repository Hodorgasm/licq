#
# Make any modifications to Makefile.in *NOT* Makefile, as it will be
# overwritten by configure.
#

SHELL = /bin/sh

srcdir = @srcdir@
top_srcdir = @top_srcdir@
qt_srcdir = @top_srcdir@/src

prefix = @prefix@

bindir = @bindir@
sharedir = @datadir@/licq/qt-gui
mandir = @mandir@

PACKAGE = @PACKAGE@
VERSION = @VERSION@
INSTALL = @INSTALL@
INSTALL_PROGRAM = @INSTALL_PROGRAM@
INSTALL_DATA = @INSTALL_DATA@
MKINSTALLDIRS = $(top_srcdir)/mkinstalldirs

FINDTR   = @QT_FINDTR@
MSG2QM   = @QT_MSG2QM@
MERGETR  = @QT_MERGETR@

TRANSLATIONS = ru_RU.KOI8-R.qm

SUFFIXES = .po

.PHONY: all clean distclean install
all: merge 

clean:
	$(RM) template.po *.qm

distclean: clean
	$(RM) *~ Makefile tags

merge: template.po
	for i in *.po; do \
	  $(MERGETR) $$i template.po; \
	done

install: $(TRANSLATIONS)
	$(MKINSTALLDIRS) $(sharedir)/locale
	for i in *.qm; do \
	  $(INSTALL_DATA) $$i $(sharedir)/locale/$$i; \
	done

template.po:
	$(FINDTR) $(qt_srcdir)/*.cpp $(qt_srcdir)/*.h > template.po

%.qm: %.po
	$(MSG2QM) $< $@


